{"ast":null,"code":"import _objectSpread from\"/Users/macintoshhd/Documents/Developpement/Web/Project/Shopify/Ecommerce-Shopify-master/frontend-shopify-ecommerce/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/macintoshhd/Documents/Developpement/Web/Project/Shopify/Ecommerce-Shopify-master/frontend-shopify-ecommerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link}from\"react-router-dom\";import styles from\"../../../styles/styles\";import{AiFillHeart,AiFillStar,AiOutlineEye,AiOutlineHeart,AiOutlineShoppingCart,AiOutlineStar}from\"react-icons/ai\";import{backend_url}from\"../../../server\";import ProductDetailsCard from\"../ProductDetailsCard/ProductDetailsCard.jsx\";import{useDispatch,useSelector}from'react-redux';import{addToWishlist,removeFromWishlist}from'../../../redux/actions/wishlist';import{addTocart}from'../../../redux/actions/cart';import{toast}from'react-toastify';import Ratings from\"../../Products/Ratings\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductCard=function ProductCard(_ref){var data=_ref.data,isEvent=_ref.isEvent;var _useSelector=useSelector(function(state){return state.wishlist;}),wishlist=_useSelector.wishlist;var _useSelector2=useSelector(function(state){return state.cart;}),cart=_useSelector2.cart;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),click=_useState2[0],setClick=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var dispatch=useDispatch();useEffect(function(){if(wishlist&&wishlist.find(function(i){return i._id===data._id;})){setClick(true);}else{setClick(false);}},[wishlist]);// Remove from wish list \nvar removeFromWishlistHandler=function removeFromWishlistHandler(data){setClick(!click);dispatch(removeFromWishlist(data));};// add to wish list\nvar addToWishlistHandler=function addToWishlistHandler(data){setClick(!click);dispatch(addToWishlist(data));};// Add to cart\nvar addToCartHandler=function addToCartHandler(id){var isItemExists=cart&&cart.find(function(i){return i._id===id;});if(isItemExists){toast.error(\"item already in cart!\");}else{if(data.stock<1){toast.error(\"Product stock limited!\");}else{var cartData=_objectSpread(_objectSpread({},data),{},{qty:1});dispatch(addTocart(cartData));toast.success(\"Item added to cart Successfully!\");}}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-[370px] bg-white rounded-lg shadow-sm p-3 relative cursor-pointer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\"}),/*#__PURE__*/_jsx(Link,{to:\"\".concat(isEvent===true?\"/product/\".concat(data._id,\"?isEvent=true\"):\"/product/\".concat(data._id)),children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(backend_url).concat(data.images&&data.images[0]),alt:\"prd\",className:\"w-full h-[170px] object-contain\"})}),/*#__PURE__*/_jsx(Link,{to:\"\".concat(isEvent===true?\"/product/\".concat(data._id,\"?isEvent=true\"):\"/product/\".concat(data._id)),children:/*#__PURE__*/_jsx(\"h5\",{className:\"\".concat(styles.shop_name),children:data.shop.name})}),/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(data._id),children:[/*#__PURE__*/_jsx(\"h4\",{className:\"pb-3 font-[500]\",children:data.name.length>40?data.name.slice(0,40)+'...':data.name}),/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:/*#__PURE__*/_jsx(Ratings,{rating:data===null||data===void 0?void 0:data.ratings})}),/*#__PURE__*/_jsxs(\"div\",{className:\"py-2 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"\".concat(styles.productDiscountPrice),children:[data.originalPrice===0?data.originalPrice:data.discountPrice,\"$\"]}),/*#__PURE__*/_jsx(\"h4\",{className:\"\".concat(styles.price),children:data.originalPrice?data.originalPrice+\" $\":null})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-[400] text-[17px] text-[#68d284]\",children:[data===null||data===void 0?void 0:data.sold_out,\" sold\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[click?/*#__PURE__*/_jsx(AiFillHeart,{size:22,className:\"cursor-pointer absolute right-2 top-5\",onClick:function onClick(){return removeFromWishlistHandler(data);},color:click?\"red\":\"#333\",title:\"Remove from wishlist\"}):/*#__PURE__*/_jsx(AiOutlineHeart,{size:22,className:\"cursor-pointer absolute right-2 top-5\",onClick:function onClick(){return addToWishlistHandler(data);},color:click?\"red\":\"#333\",title:\"Add to wishlist\"}),/*#__PURE__*/_jsx(AiOutlineEye,{size:22,className:\"cursor-pointer absolute right-2 top-14\",onClick:function onClick(){return setOpen(!open);},color:\"#333\",title:\"Quick view\"}),/*#__PURE__*/_jsx(AiOutlineShoppingCart,{size:25,className:\"cursor-pointer absolute right-2 top-24\",onClick:function onClick(){return addToCartHandler(data._id);},color:\"#444\",title:\"Add to cart\"}),open?/*#__PURE__*/_jsx(ProductDetailsCard,{setOpen:setOpen,data:data}):null]})]})});};export default ProductCard;","map":{"version":3,"names":["React","useEffect","useState","Link","styles","AiFillHeart","AiFillStar","AiOutlineEye","AiOutlineHeart","AiOutlineShoppingCart","AiOutlineStar","backend_url","ProductDetailsCard","useDispatch","useSelector","addToWishlist","removeFromWishlist","addTocart","toast","Ratings","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductCard","_ref","data","isEvent","_useSelector","state","wishlist","_useSelector2","cart","_useState","_useState2","_slicedToArray","click","setClick","_useState3","_useState4","open","setOpen","dispatch","find","i","_id","removeFromWishlistHandler","addToWishlistHandler","addToCartHandler","id","isItemExists","error","stock","cartData","_objectSpread","qty","success","children","className","to","concat","src","images","alt","shop_name","shop","name","length","slice","rating","ratings","productDiscountPrice","originalPrice","discountPrice","price","sold_out","size","onClick","color","title"],"sources":["/Users/macintoshhd/Documents/Developpement/Web/Project/Shopify/Ecommerce-Shopify-master/frontend-shopify-ecommerce/src/components/Route/ProductCard/ProductCard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link } from \"react-router-dom\";\nimport styles from \"../../../styles/styles\";\nimport {\n    AiFillHeart,\n    AiFillStar,\n    AiOutlineEye,\n    AiOutlineHeart,\n    AiOutlineShoppingCart,\n    AiOutlineStar,\n} from \"react-icons/ai\";\nimport { backend_url } from \"../../../server\";\nimport ProductDetailsCard from \"../ProductDetailsCard/ProductDetailsCard.jsx\";\nimport { useDispatch, useSelector } from 'react-redux'\nimport { addToWishlist, removeFromWishlist } from '../../../redux/actions/wishlist';\nimport { addTocart } from '../../../redux/actions/cart';\nimport { toast } from 'react-toastify';\nimport Ratings from \"../../Products/Ratings\";\n\nconst ProductCard = ({ data, isEvent }) => {\n    const { wishlist } = useSelector((state) => state.wishlist);\n    const { cart } = useSelector((state) => state.cart);\n    const [click, setClick] = useState(false);\n    const [open, setOpen] = useState(false);\n    const dispatch = useDispatch();\n\n\n\n    useEffect(() => {\n        if (wishlist && wishlist.find((i) => i._id === data._id)) {\n            setClick(true);\n        } else {\n            setClick(false);\n        }\n    }, [wishlist]);\n\n    // Remove from wish list \n    const removeFromWishlistHandler = (data) => {\n        setClick(!click);\n        dispatch(removeFromWishlist(data));\n    }\n\n    // add to wish list\n    const addToWishlistHandler = (data) => {\n        setClick(!click);\n        dispatch(addToWishlist(data))\n    }\n\n    // Add to cart\n    const addToCartHandler = (id) => {\n        const isItemExists = cart && cart.find((i) => i._id === id);\n\n        if (isItemExists) {\n            toast.error(\"item already in cart!\")\n        } else {\n            if (data.stock < 1) {\n                toast.error(\"Product stock limited!\");\n            } else {\n                const cartData = { ...data, qty: 1 };\n                dispatch(addTocart(cartData));\n                toast.success(\"Item added to cart Successfully!\")\n            }\n        }\n    }\n\n\n    return (\n        <>\n            <div className='w-full h-[370px] bg-white rounded-lg shadow-sm p-3 relative cursor-pointer'>\n                <div className='flex justify-end'>\n                </div>\n\n                <Link to={`${isEvent === true ? `/product/${data._id}?isEvent=true` : `/product/${data._id}`}`}>\n                    <img\n                        src={`${backend_url}${data.images && data.images[0]}`}\n                        alt=\"prd\"\n                        className='w-full h-[170px] object-contain'\n                    />\n                </Link>\n                <Link to={`${isEvent === true ? `/product/${data._id}?isEvent=true` : `/product/${data._id}`}`}>\n                    <h5 className={`${styles.shop_name}`} >{data.shop.name}</h5>\n                </Link>\n                <Link to={`/product/${data._id}`}>\n                    <h4 className='pb-3 font-[500]'>\n                        {data.name.length > 40 ? data.name.slice(0, 40) + '...' : data.name}\n                    </h4>\n                    {/* Star Rating */}\n                    <div className='flex'>\n                        <Ratings rating={data?.ratings} />\n                    </div>\n\n                    <div className='py-2 flex items-center justify-between'>\n                        <div className='flex'>\n                            <h5 className={`${styles.productDiscountPrice}`}>\n                                {data.originalPrice === 0 ? data.originalPrice : data.discountPrice}$\n                            </h5>\n\n                            <h4 className={`${styles.price}`}>\n                                {data.originalPrice ? data.originalPrice + \" $\" : null}\n                            </h4>\n                        </div>\n\n                        <span className=\"font-[400] text-[17px] text-[#68d284]\">\n                            {data?.sold_out} sold\n                        </span>\n                    </div>\n                </Link>\n\n                {/* side option */}\n                <div>\n                    {\n                        click ? (\n                            <AiFillHeart\n                                size={22}\n                                className=\"cursor-pointer absolute right-2 top-5\"\n                                onClick={() => removeFromWishlistHandler(data)}\n                                color={click ? \"red\" : \"#333\"}\n                                title='Remove from wishlist'\n                            />\n                        ) : (\n                            <AiOutlineHeart\n                                size={22}\n                                className=\"cursor-pointer absolute right-2 top-5\"\n                                onClick={() => addToWishlistHandler(data)}\n                                color={click ? \"red\" : \"#333\"}\n                                title='Add to wishlist'\n\n                            />\n                        )}\n                    <AiOutlineEye\n                        size={22}\n                        className=\"cursor-pointer absolute right-2 top-14\"\n                        onClick={() => setOpen(!open)}\n                        color=\"#333\"\n                        title='Quick view'\n                    />\n\n                    <AiOutlineShoppingCart\n                        size={25}\n                        className=\"cursor-pointer absolute right-2 top-24\"\n                        onClick={() => addToCartHandler(data._id)}\n                        color=\"#444\"\n                        title='Add to cart'\n                    />\n                    {open ? <ProductDetailsCard setOpen={setOpen} data={data} /> : null}\n                </div>\n            </div>\n        </>\n    )\n}\n\nexport default ProductCard"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}